pipeline {
    agent any

    environment {
        JOB_NAME = "${env.JOB_NAME}"
        BUILD_NUMBER = "${env.BUILD_NUMBER}"
        SOURCE_DIR = "SAMPLE_TEST"
        HOST_PORT = "8085"
        CONTAINER_PORT = "8085"
    }

    stages {
        stage('Build and Publish') {
            steps {
                bat '''
                    echo %CD%
                    dotnet --version
                    dotnet restore
                    echo building %JOB_NAME%
                    dotnet build
                    dotnet publish -o "%WORKSPACE%\\%SOURCE_DIR%\\%SOURCE_DIR%.pub"

                '''
            }
        }
    }
}
